/*! Splitting, ${npm_package_version} https://github.com/shshaw/splitting/ @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Splitting=t()}(this,function(){"use strict";var n=document;function r(e,t,n){e.style.setProperty("--"+t,n)}function s(e,t){return e.appendChild(t),t}function c(e,t,n){var r=document.createElement("span");return r.setAttribute("data-split",t),n&&(r.setAttribute("data-"+t,n),r.textContent=n),e.appendChild(r),r}function o(e,t){return e&&0!=e.length?e.nodeName?[e]:[].slice.call(e[0].nodeName?e:(t||n).querySelectorAll(e)):[]}function u(e,n,t){t.some(function(e,t){!function t(e,n){Array.isArray(e)?e.some(function(e){t(e,n)}):n(e)}(e,function(e){r(e,n+"-index",t)})}),r(e,n+"-total",t.length)}var a={};function e(e){return function t(n,e,r){var o=r.indexOf(n);if(-1==o)r.unshift(n),(a[n].depends||[]).some(function(e){t(e,n,r)});else{var i=r.indexOf(e);r.splice(o,1),r.splice(i,0,n)}return r}(e,0,[]).map(function(e){return a[e]})}function t(e){a[e.by]=e}var l=1,d=2;function f(e,n,r,o){e.normalize();var i=[],u=document.createDocumentFragment();return o===d&&i.push(e.previousSibling),e.childNodes.forEach(function(e){if(e&&e.childNodes&&e.childNodes.length)return s(u,e),void i.push.apply(i,f(e,n,r,o));var t=(e.wholeText||"").trim();t.length?t.split(r).some(function(e,t){t&&o===l&&c(u,n," "),i.push(c(u,n,e))}):s(u,e)}),e.innerHTML="",s(e,u),i}var p={by:"words",key:"word",split:function(e,t){return f(e,"word",/\s+/,l)}},m={by:"chars",key:"char",depends:["words"],split:function(e,r,t){return t.words.reduce(function(e,t,n){return e.push.apply(e,f(t,"char","",r.whitespace&&n?d:0)),e},[])}};function y(e,n,r){r=r||1;var o={};return e.some(function(e){var t=Math.round(e[n]*r)/r;(o[t]||(o[t]=[])).push(e)}),Object.keys(o).map(Number).sort().map(function(e){return o[e]})}var h={by:"lines",key:"line",alias:1,depends:["words"],split:function(e,t,n){return y(n.words,"offsetTop")}},g={by:"items",key:"item",split:function(e,t){return o(t.matching||e.children,e)}},v={by:"rows",key:"row",split:function(e,t,n){return y(o(t.matching||e.children,e),"offsetTop")}},b={by:"columns",key:"column",split:function(e,t,n){return y(o(t.matching||e.children,e),"offsetLeft")}},w={by:"layout",split:function(e,t){if(t.image=t.image||e.dataset&&e.dataset.image||e.currentSrc||e.src,t.rows=t.rows||e.dataset&&e.dataset.rows||1,t.cols=t.cols||e.dataset&&e.dataset.cols||1,!t.image){var n=e.querySelector("img");t.image=n&&(n.currentSrc||n.src)}for(var r=t.rows*t.cols,o=[],i=document.createDocumentFragment(),u=0;u<r;u++){var s=c(i,"cell");inner=c(s,"cell-inner"),o.push(s)}return e.appendChild(i),t.image&&e.style.setProperty("background-image","url("+t.image+")"),o}},k={by:"cell-columns",key:"cell-column",depends:["layout"],split:function(e,t,n){var r=t.rows,o=Array(r).map(function(){return[]});return n.layout.some(function(e){columns[i%r].push(e)}),o}},x={by:"cell-rows",key:"cell-row",depends:["layout"],split:function(e,t,n){var r=t.rows;Array(r).map(function(){return[]});return n.layout.some(function(e,t){results[Math.floor(t/r)].push(e)}),results}};function A(i){return o((i=i||{}).target||"[data-splitting]").map(function(r){var o={el:r};return e(i.by||r.dataset.splitting||"chars").some(function(e){if(e.split){var t=e.split(r,i,o),n=(e.key||"")+(i.key?"-"+i.key:"");n&&u(r,n,t),o[e.by]=t}}),o})}return A.html=function(e){e=e||{};var t=document.createElement("span");return t.innerHTML=e.content,e.target=t,A(e),t.outerHTML},(A.add=t)(p),t(m),t(h),t(g),t(v),t(b),t({by:"grid",depends:["rows","columns"]}),t(w),t(x),t(k),t({by:"cells",key:"cell",depends:["cell-rows","cell-columns"],split:function(e,t,n){return n.layout}}),A});